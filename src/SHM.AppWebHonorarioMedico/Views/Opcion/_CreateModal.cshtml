@model SHM.AppWebHonorarioMedico.Models.OpcionCreateViewModel

<div class="modal fade" id="createModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header bg-morado">
                <h5 class="modal-title text-white">
                    <i class="fas fa-plus-circle mr-2"></i>Nueva Opcion de Menu
                </h5>
                <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form id="createForm">
                @Html.AntiForgeryToken()
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="create_Nombre">Nombre <span class="text-danger">*</span></label>
                                <input type="text" id="create_Nombre" class="form-control" maxlength="100" required
                                       placeholder="Ej: Usuarios" />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="create_IdOpcionPadre">Opcion Padre</label>
                                <select id="create_IdOpcionPadre" class="form-control">
                                    @foreach (var item in Model.OpcionesPadre)
                                    {
                                        if (item.Selected)
                                        {
                                            <option value="@item.Value" selected>@item.Text</option>
                                        }
                                        else
                                        {
                                            <option value="@item.Value">@item.Text</option>
                                        }
                                    }
                                </select>
                                <small class="form-text text-muted">Seleccione "Ninguno" para crear una opcion de primer nivel.</small>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8">
                            <div class="form-group">
                                <label for="create_Url">URL</label>
                                <input type="text" id="create_Url" class="form-control" maxlength="255"
                                       placeholder="Ej: /Usuario/Index" />
                                <small class="form-text text-muted">Dejar vacio si es solo un contenedor de sub-opciones.</small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="create_Orden">Orden</label>
                                <input type="number" id="create_Orden" class="form-control" min="0"
                                       placeholder="Ej: 1" value="@Model.Orden" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="create_Icono">Icono (Font Awesome)</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="iconPreview">
                                    <i class="fas fa-icons"></i>
                                </span>
                            </div>
                            <input type="text" id="create_Icono" class="form-control" maxlength="255"
                                   placeholder="Ej: fas fa-users" oninput="updateIconPreview(this.value)" />
                        </div>
                        <small class="form-text text-muted">
                            Visite <a href="https://fontawesome.com/icons" target="_blank">Font Awesome</a> para ver iconos disponibles.
                        </small>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        <i class="fas fa-times mr-1"></i>Cancelar
                    </button>
                    <button type="button" class="btn btn-morado" onclick="submitCreate()">
                        <i class="fas fa-save mr-1"></i>Guardar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    function updateIconPreview(iconClass) {
        var preview = document.getElementById('iconPreview');
        if (iconClass && iconClass.trim()) {
            preview.innerHTML = '<i class="' + iconClass + '"></i>';
        } else {
            preview.innerHTML = '<i class="fas fa-icons"></i>';
        }
    }
</script>
