@using Microsoft.AspNetCore.Components.Authorization
@using System.Security.Claims
@using Microsoft.Extensions.Configuration

@inject IConfiguration Configuration

@{

    string nombreSede = "";
    string nombreArea = "";

    if (User?.Identity?.IsAuthenticated == true)
    {
        //sedeUsuario = User.FindFirst("NombreSede")?.Value;
        nombreSede = User?.FindFirst("NombreSede")?.Value ?? string.Empty;
        nombreArea = User?.FindFirst("NombreArea")?.Value ?? string.Empty;
    }


    string nombreUsuario = "";

    if (User?.Identity?.IsAuthenticated == true)
    {
        nombreUsuario = User?.FindFirst("NombreUsuario")?.Value ?? string.Empty;
    }
    else
    {
        nombreUsuario = "";
    }


}

<!-- Navbar -->
<nav class="main-header navbar navbar-expand navbar-white navbar-light">

    <!-- Left navbar links -->
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
            <a href="@Url.Action("","Home")" class="nav-link">Inicio</a>
        </li>
        <li class="nav-item">
            <span class="nav-link text-primary">Sede: @nombreSede | @nombreArea</span>
        </li>
    </ul>

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto align-items-center">
        <!-- Navbar Search -->
        <!-- Messages Dropdown Menu -->
        <!-- Notifications Dropdown Menu -->
        <li class="nav-item">
            <span class="nav-link text-primary">Bienvenido @nombreUsuario</span>
        </li>
        <!--
    <li class="nav-item">
        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
            <i class="fas fa-expand-arrows-alt"></i>
        </a>
    </li>
        -->
        <li class="nav-item">
            <a class="nav-link" href="#" data-toggle="modal" data-target="#logoutModal" title="Salir">
                <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
            </a>
        </li>
    </ul>
</nav>
<!-- /.navbar -->

<!-- Logout Modal-->
<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Cerrar Sesión?</h5>
                <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body text-center">
                Seleccione "Salir" a continuación si está listo para finalizar su sesión actual.
            </div>
            <div class="modal-footer">
                @Html.ActionLink("Salir", "Logout", "Auth", null, new { @class = "btn btn-primary btn-sm" })
                <button class="btn btn-secondary btn-sm" type="button" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

